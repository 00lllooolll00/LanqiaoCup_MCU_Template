C51 COMPILER V9.60.7.0   MAIN                                                              04/06/2025 01:36:34 PAGE 1   


C51 COMPILER V9.60.7.0, COMPILATION OF MODULE MAIN
OBJECT MODULE PLACED IN .\Objects\main.obj
COMPILER INVOKED BY: D:\Keli5\C51\BIN\C51.EXE ..\User\Src\main.c OPTIMIZE(8,SPEED) BROWSE INCDIR(..\User\Inc;..\Driver\I
                    -nc) DEBUG OBJECTEXTEND PRINT(.\Listings\main.lst) OBJECT(.\Objects\main.obj)

line level    source

   1          /**
   2           * @file main.c
   3           * @author ä¹åƒä¹ç™¾ä¹åä¹
   4           * @brief  åŸºäºè¥¿é£å›¢é˜Ÿçš„æ¨¡æ¿ï¼ŒåŠ ä¸Šè‡ªå·±å†™çš„è°ƒåº¦å™¨ï¼Œå›Šæ‹¬äº†è“æ¡¥æ¯å•ç‰‡æœºçš„æ‰€æœ
             -‰å¤–è®¾ï¼Œå¹¶ä¸”ä¸ºæ¯ä¸€ç§å¤–è®¾éƒ½æä¾›äº†å¯¹åº”çš„ä¾‹å­å’Œæ³¨é‡Šã€‚
   5           * @version 0.1
   6           * @date 2025-03-26
   7           * 
   8           * @copyright Copyright (c) 2025
   9           * 
  10           */
  11          /*HEADER*/
  12          #include "Sys.h"
  13          
  14          /*Global Variable*/
  15          uint32_t pdata Mysystick = 0; //ç³»ç»Ÿå¿ƒè·³
  16          uint8_t pdata Seg_Buf[8]; //æ•°ç ç®¡æ˜¾ç¤ºç¼“å­˜
  17          uint8_t pdata Seg_Point[8]; //æ•°ç ç®¡å°æ•°ç‚¹æ˜¾ç¤ºç¼“å­˜
  18          uint8_t pdata Led_Buf[8]; //LEDç¯æ˜¾ç¤ºç¼“å­˜
  19          
  20          /*Task Creation Seg Led*/
  21          void Task_Disp(void)
  22          {
  23   1          uint8_t Scan = Mysystick % 8; //æ˜¾ç¤ºæ‰«æå˜é‡ åªåœ¨0â€”â€”7å‘¨æœŸå˜
  24   1      
  25   1          Seg_Disp(Scan, Seg_Buf[Scan], Seg_Point[Scan]); //æ•°ç ç®¡æ˜¾ç¤º
  26   1          Led_Disp(Scan, Led_Buf[Scan]); //LEDæ˜¾ç¤º
  27   1          // Led_Disp(Led_Buf); //LEDæ˜¾ç¤º 4Tä¼˜åŒ–ç‰ˆæœ¬
  28   1      }
  29          
  30          /*MAIN*/
  31          void main(void)
  32          {
  33   1          /*Initialize*/
  34   1          Periph_Init(); //åˆå§‹åŒ–LEDå’Œå¤–è®¾ å°½é‡å°†è¯¥æ¨¡å—æ”¾åˆ°ç¬¬ä¸€ä¸ª
  35   1          while (Read_temperature() > 80); //æ¶ˆé™¤ds18b20é¦–æ¬¡è½¬æ¢ä¸º85çš„æ•°æ®
  36   1          memset(Seg_Point, 0, 8); //åˆå§‹åŒ–æ•°ç ç®¡å°æ•°ç‚¹ç¼“å†²
  37   1          memset(Seg_Buf, 10, 8); //åˆå§‹åŒ–æ•°ç ç®¡ç¼“å†²åŒº
  38   1          memset(Led_Buf, 0, 8); //åˆå§‹åŒ–LEDç¼“å†²åŒº
  39   1      
  40   1          RTC_Set(ucRTC); //å°†éœ€è¦çš„æ—¶é—´éƒ½å†™å…¥RTCä¸­
  41   1          // Timer0_Init(); //åˆå§‹åŒ–TIM0
  42   1          // Uart1_Init(); //åˆå§‹åŒ–ä¸²å£1
  43   1          Timer2_Init(); //åˆå§‹åŒ–å¿ƒè·³æ—¶é’Ÿæº
  44   1          EA = 1;
  45   1      
  46   1          /*Task Add*/
  47   1          /*ä»¥ä¸‹ä¸ºå„ä¸ªæ¨¡å—çš„å®ä¾‹å†ç¨‹  å–æ¶ˆæ³¨é‡Šå³å¯è§‚å¯Ÿå¯¹åº”æ¨¡å—çš„ç°è±¡*/
  48   1          Task_Add(&Task_Key, 10);
  49   1          // Task_Add(&Task_NE555, 1000);
  50   1          // Task_Add(&Task_Periph, 500);
  51   1          // Task_Add(&Task_RTC, 500);
  52   1          // Task_Add(&Task_Ds18b20, 750);
  53   1          // Task_Add(&Task_Ul, 200);
C51 COMPILER V9.60.7.0   MAIN                                                              04/06/2025 01:36:34 PAGE 2   

  54   1          // Task_Add(&Task_PCF8591, 200);
  55   1          // Task_Add(&Task_Serial, 250);
  56   1      
  57   1          /*Loop*/
  58   1          while (1)
  59   1          {
  60   2              Task_Start();
  61   2          }
  62   1      }
  63          
  64          /*ISR*/
  65          /*è¿™é‡Œä½¿ç”¨TIM2å®šæ—¶å™¨ä½œä¸ºç³»ç»Ÿå¿ƒè·³æº*/
  66          void Timer2_Isr(void) interrupt 12
  67          {
  68   1          Mysystick++;
  69   1          Serial_Idle_Cnt++;
  70   1          Task_Disp();
  71   1      }
  72          
  73          /*ä¸²å£ä¸­æ–­*/
  74          void Uart1_Isr(void) interrupt 4
  75          {
  76   1          if (RI) //æ£€æµ‹ä¸²å£1æ¥æ”¶ä¸­æ–­
  77   1          {
  78   2              RI = 0; //æ¸…é™¤ä¸²å£1æ¥æ”¶ä¸­æ–­è¯·æ±‚ä½
  79   2      
  80   2              Serial_Idle_Cnt = 0; //æ²¡æœ‰æ¥æ”¶åˆ°æ•°æ®å°±ä¼šä¸€ç›´è‡ªå¢ï¼Œæ¥æ”¶åˆ°æ•°æ®åä¼šä¿æŒ0ï¼Œé€
             -šè¿‡è¿™ç‚¹å¯ä»¥è¾¾åˆ°ç©ºé—²è§£æçš„æ•ˆæœ
  81   2      
  82   2              RxData[index++] = SBUF;
  83   2          }
  84   1      }


MODULE INFORMATION:   STATIC OVERLAYABLE
   CODE SIZE        =    280    ----
   CONSTANT SIZE    =   ----    ----
   XDATA SIZE       =   ----    ----
   PDATA SIZE       =     28    ----
   DATA SIZE        =   ----       1
   IDATA SIZE       =   ----    ----
   BIT SIZE         =   ----    ----
END OF MODULE INFORMATION.


C51 COMPILATION COMPLETE.  0 WARNING(S),  0 ERROR(S)
